<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">.lst-kix_6vw6mk9kvkv6-5>li:before{content:"\0025a0  "}.lst-kix_6vw6mk9kvkv6-6>li:before{content:"\0025cf  "}.lst-kix_6vw6mk9kvkv6-3>li:before{content:"\0025cf  "}.lst-kix_6vw6mk9kvkv6-7>li:before{content:"\0025cb  "}.lst-kix_6vw6mk9kvkv6-4>li:before{content:"\0025cb  "}.lst-kix_egyvvhcdver5-8>li:before{content:"\0025a0  "}.lst-kix_tamdtlejxfbm-8>li:before{content:"\0025a0  "}.lst-kix_egyvvhcdver5-7>li:before{content:"\0025cb  "}.lst-kix_egyvvhcdver5-4>li:before{content:"\0025cb  "}.lst-kix_6vw6mk9kvkv6-1>li:before{content:"\0025cb  "}.lst-kix_6vw6mk9kvkv6-2>li:before{content:"\0025a0  "}.lst-kix_egyvvhcdver5-5>li:before{content:"\0025a0  "}.lst-kix_egyvvhcdver5-6>li:before{content:"\0025cf  "}.lst-kix_6vw6mk9kvkv6-0>li:before{content:"\0025cf  "}.lst-kix_egyvvhcdver5-1>li:before{content:"\0025cb  "}.lst-kix_egyvvhcdver5-0>li:before{content:"\0025cf  "}.lst-kix_egyvvhcdver5-3>li:before{content:"\0025cf  "}.lst-kix_egyvvhcdver5-2>li:before{content:"\0025a0  "}ul.lst-kix_wv5p6pt6uwbf-5{list-style-type:none}ul.lst-kix_wv5p6pt6uwbf-6{list-style-type:none}ul.lst-kix_wv5p6pt6uwbf-7{list-style-type:none}ul.lst-kix_wv5p6pt6uwbf-8{list-style-type:none}.lst-kix_lgy07ebbw5j5-2>li:before{content:"\0025a0  "}.lst-kix_lgy07ebbw5j5-3>li:before{content:"\0025cf  "}.lst-kix_lgy07ebbw5j5-0>li:before{content:"\0025cf  "}.lst-kix_lgy07ebbw5j5-1>li:before{content:"\0025cb  "}.lst-kix_3duirw9oqwse-0>li:before{content:"\0025cf  "}.lst-kix_3duirw9oqwse-1>li:before{content:"\0025cb  "}.lst-kix_3duirw9oqwse-2>li:before{content:"\0025a0  "}.lst-kix_m4r13of35bgz-0>li:before{content:"\0025cf  "}.lst-kix_ny634brx5tig-8>li:before{content:"\0025a0  "}.lst-kix_ny634brx5tig-6>li:before{content:"\0025cf  "}.lst-kix_ny634brx5tig-4>li:before{content:"\0025cb  "}.lst-kix_ntqjrxldsl1j-1>li:before{content:"\0025cb  "}.lst-kix_ntqjrxldsl1j-3>li:before{content:"\0025cf  "}.lst-kix_ntqjrxldsl1j-5>li:before{content:"\0025a0  "}.lst-kix_ntqjrxldsl1j-7>li:before{content:"\0025cb  "}ul.lst-kix_nf05dijsn6ga-6{list-style-type:none}.lst-kix_d00z96tn3ens-7>li:before{content:"\0025cb  "}ul.lst-kix_d00z96tn3ens-7{list-style-type:none}ul.lst-kix_nf05dijsn6ga-7{list-style-type:none}ul.lst-kix_d00z96tn3ens-8{list-style-type:none}ul.lst-kix_nf05dijsn6ga-4{list-style-type:none}ul.lst-kix_d00z96tn3ens-5{list-style-type:none}.lst-kix_3duirw9oqwse-7>li:before{content:"\0025cb  "}ul.lst-kix_nf05dijsn6ga-5{list-style-type:none}ul.lst-kix_d00z96tn3ens-6{list-style-type:none}ul.lst-kix_nf05dijsn6ga-8{list-style-type:none}ul.lst-kix_d00z96tn3ens-0{list-style-type:none}.lst-kix_3duirw9oqwse-3>li:before{content:"\0025cf  "}.lst-kix_3duirw9oqwse-5>li:before{content:"\0025a0  "}.lst-kix_m4r13of35bgz-2>li:before{content:"\0025a0  "}ul.lst-kix_d00z96tn3ens-3{list-style-type:none}.lst-kix_d00z96tn3ens-5>li:before{content:"\0025a0  "}ul.lst-kix_d00z96tn3ens-4{list-style-type:none}ul.lst-kix_d00z96tn3ens-1{list-style-type:none}ul.lst-kix_d00z96tn3ens-2{list-style-type:none}.lst-kix_ny634brx5tig-0>li:before{content:"\0025cf  "}.lst-kix_m4r13of35bgz-4>li:before{content:"\0025cb  "}.lst-kix_m4r13of35bgz-6>li:before{content:"\0025cf  "}.lst-kix_ny634brx5tig-2>li:before{content:"\0025a0  "}.lst-kix_d00z96tn3ens-3>li:before{content:"\0025cf  "}.lst-kix_m4r13of35bgz-8>li:before{content:"\0025a0  "}ul.lst-kix_nf05dijsn6ga-2{list-style-type:none}.lst-kix_d00z96tn3ens-1>li:before{content:"\0025cb  "}ul.lst-kix_nf05dijsn6ga-3{list-style-type:none}.lst-kix_lgy07ebbw5j5-5>li:before{content:"\0025a0  "}ul.lst-kix_nf05dijsn6ga-0{list-style-type:none}ul.lst-kix_nf05dijsn6ga-1{list-style-type:none}ul.lst-kix_egyvvhcdver5-1{list-style-type:none}ul.lst-kix_lgy07ebbw5j5-3{list-style-type:none}ul.lst-kix_egyvvhcdver5-2{list-style-type:none}ul.lst-kix_lgy07ebbw5j5-2{list-style-type:none}ul.lst-kix_egyvvhcdver5-3{list-style-type:none}ul.lst-kix_lgy07ebbw5j5-1{list-style-type:none}ul.lst-kix_egyvvhcdver5-4{list-style-type:none}ul.lst-kix_lgy07ebbw5j5-0{list-style-type:none}ul.lst-kix_lgy07ebbw5j5-7{list-style-type:none}ul.lst-kix_lgy07ebbw5j5-6{list-style-type:none}ul.lst-kix_lgy07ebbw5j5-5{list-style-type:none}ul.lst-kix_egyvvhcdver5-0{list-style-type:none}ul.lst-kix_lgy07ebbw5j5-4{list-style-type:none}.lst-kix_lgy07ebbw5j5-7>li:before{content:"\0025cb  "}ul.lst-kix_egyvvhcdver5-5{list-style-type:none}ul.lst-kix_egyvvhcdver5-6{list-style-type:none}ul.lst-kix_egyvvhcdver5-7{list-style-type:none}ul.lst-kix_egyvvhcdver5-8{list-style-type:none}ul.lst-kix_lgy07ebbw5j5-8{list-style-type:none}.lst-kix_tamdtlejxfbm-2>li:before{content:"\0025a0  "}.lst-kix_tamdtlejxfbm-6>li:before{content:"\0025cf  "}.lst-kix_tamdtlejxfbm-0>li:before{content:"\0025cf  "}.lst-kix_tamdtlejxfbm-4>li:before{content:"\0025cb  "}ul.lst-kix_tamdtlejxfbm-7{list-style-type:none}.lst-kix_iq8ywxonbta1-6>li:before{content:"\0025cf  "}ul.lst-kix_tamdtlejxfbm-8{list-style-type:none}.lst-kix_nf05dijsn6ga-7>li:before{content:"\0025cb  "}.lst-kix_iq8ywxonbta1-4>li:before{content:"\0025cb  "}ul.lst-kix_iq8ywxonbta1-6{list-style-type:none}.lst-kix_iq8ywxonbta1-8>li:before{content:"\0025a0  "}ul.lst-kix_iq8ywxonbta1-7{list-style-type:none}.lst-kix_nf05dijsn6ga-8>li:before{content:"\0025a0  "}.lst-kix_iq8ywxonbta1-3>li:before{content:"\0025cf  "}.lst-kix_iq8ywxonbta1-7>li:before{content:"\0025cb  "}ul.lst-kix_iq8ywxonbta1-8{list-style-type:none}ul.lst-kix_ny634brx5tig-7{list-style-type:none}.lst-kix_iq8ywxonbta1-2>li:before{content:"\0025a0  "}ul.lst-kix_ny634brx5tig-6{list-style-type:none}ul.lst-kix_ny634brx5tig-5{list-style-type:none}ul.lst-kix_ny634brx5tig-4{list-style-type:none}ul.lst-kix_ny634brx5tig-3{list-style-type:none}ul.lst-kix_ny634brx5tig-2{list-style-type:none}.lst-kix_nf05dijsn6ga-2>li:before{content:"\0025a0  "}ul.lst-kix_ny634brx5tig-1{list-style-type:none}.lst-kix_iq8ywxonbta1-1>li:before{content:"\0025cb  "}ul.lst-kix_ny634brx5tig-0{list-style-type:none}.lst-kix_nf05dijsn6ga-1>li:before{content:"\0025cb  "}.lst-kix_iq8ywxonbta1-0>li:before{content:"\0025cf  "}.lst-kix_nf05dijsn6ga-0>li:before{content:"\0025cf  "}ul.lst-kix_iq8ywxonbta1-2{list-style-type:none}ul.lst-kix_iq8ywxonbta1-3{list-style-type:none}ul.lst-kix_iq8ywxonbta1-4{list-style-type:none}ul.lst-kix_iq8ywxonbta1-5{list-style-type:none}ul.lst-kix_iq8ywxonbta1-0{list-style-type:none}ul.lst-kix_iq8ywxonbta1-1{list-style-type:none}.lst-kix_nf05dijsn6ga-3>li:before{content:"\0025cf  "}.lst-kix_nf05dijsn6ga-4>li:before{content:"\0025cb  "}ul.lst-kix_ny634brx5tig-8{list-style-type:none}.lst-kix_nf05dijsn6ga-5>li:before{content:"\0025a0  "}.lst-kix_nf05dijsn6ga-6>li:before{content:"\0025cf  "}.lst-kix_iq8ywxonbta1-5>li:before{content:"\0025a0  "}.lst-kix_wv5p6pt6uwbf-2>li:before{content:"\0025a0  "}.lst-kix_wv5p6pt6uwbf-0>li:before{content:"\0025cf  "}.lst-kix_wv5p6pt6uwbf-1>li:before{content:"\0025cb  "}.lst-kix_1cs4bla96jjc-8>li:before{content:"\0025a0  "}.lst-kix_wv5p6pt6uwbf-8>li:before{content:"\0025a0  "}.lst-kix_1cs4bla96jjc-5>li:before{content:"\0025a0  "}ul.lst-kix_ntqjrxldsl1j-1{list-style-type:none}ul.lst-kix_ntqjrxldsl1j-0{list-style-type:none}.lst-kix_1cs4bla96jjc-6>li:before{content:"\0025cf  "}.lst-kix_wv5p6pt6uwbf-3>li:before{content:"\0025cf  "}.lst-kix_1cs4bla96jjc-7>li:before{content:"\0025cb  "}ul.lst-kix_ntqjrxldsl1j-7{list-style-type:none}ul.lst-kix_3duirw9oqwse-5{list-style-type:none}ul.lst-kix_ntqjrxldsl1j-6{list-style-type:none}ul.lst-kix_3duirw9oqwse-6{list-style-type:none}ul.lst-kix_3duirw9oqwse-7{list-style-type:none}ul.lst-kix_ntqjrxldsl1j-8{list-style-type:none}.lst-kix_1cs4bla96jjc-0>li:before{content:"\0025cf  "}.lst-kix_1cs4bla96jjc-2>li:before{content:"\0025a0  "}ul.lst-kix_3duirw9oqwse-8{list-style-type:none}ul.lst-kix_ntqjrxldsl1j-3{list-style-type:none}.lst-kix_wv5p6pt6uwbf-4>li:before{content:"\0025cb  "}ul.lst-kix_3duirw9oqwse-1{list-style-type:none}ul.lst-kix_ntqjrxldsl1j-2{list-style-type:none}ul.lst-kix_3duirw9oqwse-2{list-style-type:none}ul.lst-kix_ntqjrxldsl1j-5{list-style-type:none}.lst-kix_wv5p6pt6uwbf-5>li:before{content:"\0025a0  "}ul.lst-kix_3duirw9oqwse-3{list-style-type:none}ul.lst-kix_ntqjrxldsl1j-4{list-style-type:none}.lst-kix_1cs4bla96jjc-1>li:before{content:"\0025cb  "}ul.lst-kix_3duirw9oqwse-4{list-style-type:none}.lst-kix_wv5p6pt6uwbf-6>li:before{content:"\0025cf  "}.lst-kix_1cs4bla96jjc-4>li:before{content:"\0025cb  "}ul.lst-kix_3duirw9oqwse-0{list-style-type:none}.lst-kix_wv5p6pt6uwbf-7>li:before{content:"\0025cb  "}.lst-kix_1cs4bla96jjc-3>li:before{content:"\0025cf  "}.lst-kix_ny634brx5tig-5>li:before{content:"\0025a0  "}.lst-kix_ny634brx5tig-3>li:before{content:"\0025cf  "}.lst-kix_ntqjrxldsl1j-2>li:before{content:"\0025a0  "}.lst-kix_ntqjrxldsl1j-4>li:before{content:"\0025cb  "}.lst-kix_ny634brx5tig-7>li:before{content:"\0025cb  "}.lst-kix_ntqjrxldsl1j-6>li:before{content:"\0025cf  "}.lst-kix_3duirw9oqwse-8>li:before{content:"\0025a0  "}.lst-kix_d00z96tn3ens-6>li:before{content:"\0025cf  "}.lst-kix_d00z96tn3ens-8>li:before{content:"\0025a0  "}.lst-kix_3duirw9oqwse-6>li:before{content:"\0025cf  "}.lst-kix_m4r13of35bgz-1>li:before{content:"\0025cb  "}.lst-kix_ntqjrxldsl1j-8>li:before{content:"\0025a0  "}ul.lst-kix_m4r13of35bgz-2{list-style-type:none}.lst-kix_3duirw9oqwse-4>li:before{content:"\0025cb  "}ul.lst-kix_m4r13of35bgz-3{list-style-type:none}ul.lst-kix_m4r13of35bgz-4{list-style-type:none}.lst-kix_d00z96tn3ens-4>li:before{content:"\0025cb  "}ul.lst-kix_m4r13of35bgz-5{list-style-type:none}ul.lst-kix_m4r13of35bgz-6{list-style-type:none}ul.lst-kix_m4r13of35bgz-7{list-style-type:none}ul.lst-kix_m4r13of35bgz-8{list-style-type:none}.lst-kix_m4r13of35bgz-3>li:before{content:"\0025cf  "}.lst-kix_ny634brx5tig-1>li:before{content:"\0025cb  "}.lst-kix_d00z96tn3ens-0>li:before{content:"\0025cf  "}ul.lst-kix_m4r13of35bgz-0{list-style-type:none}ul.lst-kix_m4r13of35bgz-1{list-style-type:none}.lst-kix_m4r13of35bgz-5>li:before{content:"\0025a0  "}.lst-kix_lgy07ebbw5j5-6>li:before{content:"\0025cf  "}.lst-kix_d00z96tn3ens-2>li:before{content:"\0025a0  "}.lst-kix_lgy07ebbw5j5-4>li:before{content:"\0025cb  "}.lst-kix_m4r13of35bgz-7>li:before{content:"\0025cb  "}ul.lst-kix_wv5p6pt6uwbf-1{list-style-type:none}ul.lst-kix_wv5p6pt6uwbf-2{list-style-type:none}ul.lst-kix_wv5p6pt6uwbf-3{list-style-type:none}ul.lst-kix_wv5p6pt6uwbf-4{list-style-type:none}ul.lst-kix_wv5p6pt6uwbf-0{list-style-type:none}.lst-kix_lgy07ebbw5j5-8>li:before{content:"\0025a0  "}ul.lst-kix_6vw6mk9kvkv6-0{list-style-type:none}ul.lst-kix_6vw6mk9kvkv6-3{list-style-type:none}ul.lst-kix_6vw6mk9kvkv6-4{list-style-type:none}ul.lst-kix_6vw6mk9kvkv6-1{list-style-type:none}ul.lst-kix_1cs4bla96jjc-8{list-style-type:none}ul.lst-kix_6vw6mk9kvkv6-2{list-style-type:none}ul.lst-kix_1cs4bla96jjc-7{list-style-type:none}ul.lst-kix_6vw6mk9kvkv6-7{list-style-type:none}ul.lst-kix_1cs4bla96jjc-6{list-style-type:none}ul.lst-kix_6vw6mk9kvkv6-8{list-style-type:none}ul.lst-kix_1cs4bla96jjc-5{list-style-type:none}ul.lst-kix_6vw6mk9kvkv6-5{list-style-type:none}ul.lst-kix_1cs4bla96jjc-4{list-style-type:none}ul.lst-kix_6vw6mk9kvkv6-6{list-style-type:none}ul.lst-kix_1cs4bla96jjc-3{list-style-type:none}ul.lst-kix_1cs4bla96jjc-2{list-style-type:none}ul.lst-kix_1cs4bla96jjc-1{list-style-type:none}ul.lst-kix_1cs4bla96jjc-0{list-style-type:none}.lst-kix_tamdtlejxfbm-1>li:before{content:"\0025cb  "}.lst-kix_tamdtlejxfbm-7>li:before{content:"\0025cb  "}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}.lst-kix_ntqjrxldsl1j-0>li:before{content:"\0025cf  "}.lst-kix_tamdtlejxfbm-5>li:before{content:"\0025a0  "}ul.lst-kix_tamdtlejxfbm-0{list-style-type:none}ul.lst-kix_tamdtlejxfbm-1{list-style-type:none}ul.lst-kix_tamdtlejxfbm-2{list-style-type:none}.lst-kix_tamdtlejxfbm-3>li:before{content:"\0025cf  "}ul.lst-kix_tamdtlejxfbm-3{list-style-type:none}ul.lst-kix_tamdtlejxfbm-4{list-style-type:none}.lst-kix_6vw6mk9kvkv6-8>li:before{content:"\0025a0  "}ul.lst-kix_tamdtlejxfbm-5{list-style-type:none}ul.lst-kix_tamdtlejxfbm-6{list-style-type:none}ol{margin:0;padding:0}table td,table th{padding:0}.c8{-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline;vertical-align:baseline;text-decoration-skip-ink:none;font-size:11pt;font-family:"Arial";font-style:normal}.c16{margin-left:72pt;padding-top:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c1{background-color:#1e1e1e;margin-left:72pt;padding-top:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c11{margin-left:36pt;padding-top:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c5{background-color:#1e1e1e;margin-left:36pt;padding-top:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c39{padding-top:0pt;padding-bottom:3pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c34{margin-left:18pt;padding-top:3pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c4{padding-top:0pt;padding-bottom:0pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c13{background-color:#1e1e1e;padding-top:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c23{margin-left:36pt;padding-top:3pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c38{margin-left:18pt;padding-top:3pt;padding-bottom:4pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c22{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c25{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c19{padding-top:10pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c0{padding-top:4pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c31{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c17{font-size:9pt;font-family:"Courier New";color:#dcdcaa;font-weight:400}.c15{color:#000000;font-weight:400;font-size:11pt;font-family:"Arial"}.c9{font-size:9pt;font-family:"Courier New";color:#ce9178;font-weight:400}.c2{font-size:9pt;font-family:"Courier New";color:#9cdcfe;font-weight:400}.c33{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c24{color:#6a9955;font-weight:400;font-size:9pt;font-family:"Courier New"}.c12{font-size:9pt;font-family:"Courier New";color:#c8c8c8;font-weight:400}.c32{color:#000000;font-weight:400;font-size:26pt;font-family:"Arial"}.c10{font-size:9pt;font-family:"Courier New";color:#569cd6;font-weight:400}.c3{font-size:9pt;font-family:"Courier New";color:#c586c0;font-weight:400}.c35{color:#000000;font-weight:700;font-size:11pt;font-family:"Courier New"}.c6{font-size:9pt;font-family:"Courier New";color:#d4d4d4;font-weight:400}.c18{font-size:9pt;font-family:"Courier New";color:#4fc1ff;font-weight:400}.c30{color:#000000;font-weight:700;font-size:16pt;font-family:"Arial"}.c7{text-decoration:none;vertical-align:baseline;font-style:normal}.c20{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c26{font-weight:400;font-family:"Courier New"}.c36{color:#000000;font-size:11pt}.c27{font-size:9pt;color:#4ec9b0}.c21{padding:0;margin:0}.c37{font-weight:700;font-family:"Arial"}.c29{font-size:9pt;color:#b5cea8}.c14{color:inherit;text-decoration:inherit}.c28{height:11pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:18pt;color:#000000;font-weight:700;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:0pt;color:#000000;font-weight:700;font-size:11pt;padding-bottom:0pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:0pt;color:#000000;font-weight:700;font-size:11pt;padding-bottom:0pt;font-family:"Courier New";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style><link href='/static/default-writing-styles.css' rel='stylesheet'><link rel='shortcut icon' href='/static/favicon.png' type='image/x-icon' /></head><body class="c20"><p class="c39 title" id="h.npu2t77xvyiv"><span class="c7 c32">Learn Node-SQLite</span></p><p class="c0"><span class="c8"><a class="c14" href="#h.8lxymhuhcljk">Terminology</a></span></p><p class="c34"><span class="c8"><a class="c14" href="#h.gxqzlv78etmr">Placeholders</a></span></p><p class="c19"><span class="c8"><a class="c14" href="#h.g4lh94j6xf7z">Syntax</a></span></p><p class="c34"><span class="c8"><a class="c14" href="#h.gc7vcdkw2fpj">Open up a database</a></span></p><p class="c23"><span class="c8"><a class="c14" href="#h.mv9ly0v583sd">db.all</a></span></p><p class="c23"><span class="c8"><a class="c14" href="#h.bys5kg9yvo6x">db.get</a></span></p><p class="c23"><span class="c8"><a class="c14" href="#h.2xok5g8xlta3">$</a></span></p><p class="c23"><span class="c8"><a class="c14" href="#h.juvw90dnsrys">db.run</a></span></p><p class="c23"><span class="c8"><a class="c14" href="#h.1cb7wdg3oet8">db.each</a></span></p><p class="c23"><span class="c8"><a class="c14" href="#h.trepus2ot1w">db.serialize</a></span></p><p class="c19"><span class="c8"><a class="c14" href="#h.ofyftsmmpb0t">Example</a></span></p><p class="c38"><span class="c8"><a class="c14" href="#h.636w3svc809c">Create a new table, fill it with data from another table</a></span></p><p class="c22"><span class="c15 c7"></span></p><p class="c31"><span class="c15 c7">Assumes familiarity with:</span></p><ul class="c21 lst-kix_tamdtlejxfbm-0 start"><li class="c11 li-bullet-0"><span class="c33"><a class="c14" href="https://quinncoyle.com/notes/javascript-2/">Javascript</a></span></li><li class="c11 li-bullet-0"><span class="c33"><a class="c14" href="https://quinncoyle.com/notes/nodejs-environment/">Node.js</a></span></li><li class="c11 li-bullet-0"><span class="c15 c7">SQL Syntax</span></li></ul><p class="c22"><span class="c15 c7"></span></p><p class="c22"><span class="c15 c7"></span></p><h1 class="c25" id="h.ywi62gji6x3v"><span class="c30 c7">Terminology</span></h1><h2 class="c4" id="h.gxqzlv78etmr"><span class="c7 c36 c37">Placeholders</span></h2><ul class="c21 lst-kix_ntqjrxldsl1j-0 start"><li class="c11 li-bullet-0"><span class="c15 c7">Parameters that allow searching the database based on the user&rsquo;s submission</span></li><li class="c11 li-bullet-0"><span class="c15 c7">A part of the SQL query that&rsquo;s interpolated with a variable</span></li></ul><p class="c22"><span class="c15 c7"></span></p><p class="c22"><span class="c15 c7"></span></p><h1 class="c25" id="h.g4lh94j6xf7z"><span class="c30 c7">Syntax</span></h1><h2 class="c4" id="h.gc7vcdkw2fpj"><span class="c7 c36 c37">Open up a database</span></h2><p class="c13"><span class="c10">const</span><span class="c6">&nbsp;</span><span class="c18">sqlite3</span><span class="c6">&nbsp;= </span><span class="c17">require</span><span class="c6">(</span><span class="c9">&#39;sqlite3&#39;</span><span class="c6 c7">);</span></p><p class="c13"><span class="c10">const</span><span class="c6">&nbsp;</span><span class="c18">db</span><span class="c6">&nbsp;= </span><span class="c10">new</span><span class="c6">&nbsp;</span><span class="c2">sqlite3</span><span class="c6">.</span><span class="c26 c27">Database</span><span class="c6">(</span><span class="c9">&#39;./db.sqlite&#39;</span><span class="c6 c7">);</span></p><p class="c22"><span class="c15 c7"></span></p><h3 class="c4" id="h.mv9ly0v583sd"><span class="c35 c7">db.all</span></h3><ul class="c21 lst-kix_ny634brx5tig-0 start"><li class="c11 li-bullet-0"><span class="c15 c7">Make a SQL query</span></li></ul><ul class="c21 lst-kix_ny634brx5tig-1 start"><li class="c16 li-bullet-0"><span class="c15 c7">ORDER BY</span></li></ul><p class="c1"><span class="c18">db</span><span class="c6">.</span><span class="c17">all</span><span class="c6">(</span><span class="c9">&#39;SELECT * FROM employees ORDER BY HireDate&#39;</span><span class="c6">, (</span><span class="c2">error</span><span class="c6">, </span><span class="c2">rows</span><span class="c6">) </span><span class="c10">=&gt;</span><span class="c6 c7">&nbsp;{</span></p><p class="c1"><span class="c6">&nbsp; &nbsp;</span><span class="c3">if</span><span class="c6">&nbsp;(</span><span class="c2">error</span><span class="c6 c7">) {</span></p><p class="c1"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">throw</span><span class="c6">&nbsp;</span><span class="c2">error</span><span class="c6 c7">;</span></p><p class="c1"><span class="c6 c7">&nbsp; &nbsp;}</span></p><p class="c1 c28"><span class="c6 c7"></span></p><p class="c1"><span class="c6">&nbsp; &nbsp;</span><span class="c2">console</span><span class="c6">.</span><span class="c17">log</span><span class="c6">(</span><span class="c2">rows</span><span class="c6 c7">);</span></p><p class="c1"><span class="c6">});</span></p><ul class="c21 lst-kix_nf05dijsn6ga-1 start"><li class="c16 li-bullet-0"><span class="c15 c7">WHERE</span></li></ul><p class="c1"><span class="c18">db</span><span class="c6">.</span><span class="c17">all</span><span class="c6">(</span><span class="c9">&quot;SELECT * FROM employees WHERE City = &#39;Calgary&#39;&quot;</span><span class="c6">, (</span><span class="c2">error</span><span class="c6">, </span><span class="c2">rows</span><span class="c6">) </span><span class="c10">=&gt;</span><span class="c6 c7">&nbsp;{</span></p><p class="c1"><span class="c6">&nbsp; &nbsp;</span><span class="c3">if</span><span class="c6">&nbsp;(</span><span class="c2">error</span><span class="c6 c7">) {</span></p><p class="c1"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">throw</span><span class="c6">&nbsp;</span><span class="c2">error</span><span class="c6 c7">;</span></p><p class="c1"><span class="c6 c7">&nbsp; &nbsp;}</span></p><p class="c1 c28"><span class="c6 c7"></span></p><p class="c1"><span class="c6">&nbsp; &nbsp;</span><span class="c2">console</span><span class="c6">.</span><span class="c17">log</span><span class="c6">(</span><span class="c2">rows</span><span class="c6 c7">);</span></p><p class="c1"><span class="c6 c7">});</span></p><p class="c22"><span class="c15 c7"></span></p><h3 class="c4" id="h.bys5kg9yvo6x"><span class="c35 c7">db.get</span></h3><ul class="c21 lst-kix_d00z96tn3ens-0 start"><li class="c11 li-bullet-0"><span class="c15 c7">Fetch a single row from a database</span></li><li class="c11 li-bullet-0"><span>This puts less of a load on the database than </span><span class="c7 c26 c36">db.all</span></li><li class="c11 li-bullet-0"><span class="c15 c7">The below example returns the below object, even though there are multiple objects that satisfy the query:</span></li></ul><p class="c5"><span class="c18">db</span><span class="c6">.</span><span class="c17">get</span><span class="c6">(</span><span class="c9">&quot;SELECT * FROM employees WHERE City = &#39;Calgary&#39;&quot;</span><span class="c6">, (</span><span class="c2">error</span><span class="c6">, </span><span class="c2">rows</span><span class="c6">) </span><span class="c10">=&gt;</span><span class="c6 c7">&nbsp;{</span></p><p class="c5"><span class="c6">&nbsp; &nbsp;</span><span class="c3">if</span><span class="c6">&nbsp;(</span><span class="c2">error</span><span class="c6 c7">) {</span></p><p class="c5"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">throw</span><span class="c6">&nbsp;</span><span class="c2">error</span><span class="c6 c7">;</span></p><p class="c5"><span class="c6 c7">&nbsp; &nbsp;}</span></p><p class="c5 c28"><span class="c6 c7"></span></p><p class="c5"><span class="c6">&nbsp; &nbsp;</span><span class="c2">console</span><span class="c6">.</span><span class="c17">log</span><span class="c6">(</span><span class="c2">rows</span><span class="c6 c7">);</span></p><p class="c5"><span class="c6 c7">});</span></p><p class="c31"><span class="c15 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c5"><span class="c6 c7">{</span></p><p class="c5"><span class="c6">&nbsp;</span><span class="c12">EmployeeId</span><span class="c6">: </span><span class="c26 c29">2</span><span class="c6 c7">,</span></p><p class="c5"><span class="c6">&nbsp;</span><span class="c12">LastName</span><span class="c6">: </span><span class="c9">&#39;Edwards&#39;</span><span class="c6 c7">,</span></p><p class="c5"><span class="c6">&nbsp;</span><span class="c12">FirstName</span><span class="c6">: </span><span class="c9">&#39;Nancy&#39;</span><span class="c6 c7">,</span></p><p class="c5"><span class="c6">&nbsp;</span><span class="c12">Title</span><span class="c6">: </span><span class="c9">&#39;Sales Manager&#39;</span><span class="c6 c7">,</span></p><p class="c5"><span class="c6">&nbsp;</span><span class="c12">ReportsTo</span><span class="c6">: </span><span class="c26 c29">1</span><span class="c6 c7">,</span></p><p class="c5"><span class="c6">&nbsp;</span><span class="c12">BirthDate</span><span class="c6">: </span><span class="c9">&#39;1958-12-08 00:00:00&#39;</span><span class="c6 c7">,</span></p><p class="c5"><span class="c6">&nbsp;</span><span class="c12">HireDate</span><span class="c6">: </span><span class="c9">&#39;2002-05-01 00:00:00&#39;</span><span class="c6 c7">,</span></p><p class="c5"><span class="c6">&nbsp;</span><span class="c12">Address</span><span class="c6">: </span><span class="c9">&#39;825 8 Ave SW&#39;</span><span class="c6 c7">,</span></p><p class="c5"><span class="c6">&nbsp;</span><span class="c12">City</span><span class="c6">: </span><span class="c9">&#39;Calgary&#39;</span><span class="c6 c7">,</span></p><p class="c5"><span class="c6">&nbsp;</span><span class="c12">State</span><span class="c6">: </span><span class="c9">&#39;AB&#39;</span><span class="c6 c7">,</span></p><p class="c5"><span class="c6">&nbsp;</span><span class="c12">Country</span><span class="c6">: </span><span class="c9">&#39;Canada&#39;</span><span class="c6 c7">,</span></p><p class="c5"><span class="c6">&nbsp;</span><span class="c12">PostalCode</span><span class="c6">: </span><span class="c9">&#39;T2P 2T3&#39;</span><span class="c6 c7">,</span></p><p class="c5"><span class="c6">&nbsp;</span><span class="c12">Phone</span><span class="c6">: </span><span class="c9">&#39;+1 (403) 262-3443&#39;</span><span class="c6 c7">,</span></p><p class="c5"><span class="c6">&nbsp;</span><span class="c12">Fax</span><span class="c6">: </span><span class="c9">&#39;+1 (403) 262-3322&#39;</span><span class="c6 c7">,</span></p><p class="c5"><span class="c6">&nbsp;</span><span class="c12">Email</span><span class="c6">: </span><span class="c9 c7">&#39;nancy@chinookcorp.com&#39;</span></p><p class="c5"><span class="c6 c7">}</span></p><p class="c22"><span class="c15 c7"></span></p><h3 class="c4" id="h.2xok5g8xlta3"><span class="c35 c7">$</span></h3><ul class="c21 lst-kix_wv5p6pt6uwbf-0 start"><li class="c11 li-bullet-0"><span class="c15 c7">Symbol for placeholders</span></li></ul><p class="c5"><span class="c10">const</span><span class="c6">&nbsp;</span><span class="c18">city1</span><span class="c6">&nbsp;= </span><span class="c9">&quot;Lethbridge&quot;</span><span class="c6 c7">;</span></p><p class="c5"><span class="c10">const</span><span class="c6">&nbsp;</span><span class="c18">city2</span><span class="c6">&nbsp;= </span><span class="c9">&quot;Calgary&quot;</span><span class="c6 c7">;</span></p><p class="c5 c28"><span class="c6 c7"></span></p><p class="c5"><span class="c10">const</span><span class="c6">&nbsp;</span><span class="c17">findEmployeeByCity</span><span class="c6">&nbsp;= (</span><span class="c2">city</span><span class="c6">) </span><span class="c10">=&gt;</span><span class="c6 c7">&nbsp;{</span></p><p class="c5"><span class="c6">&nbsp; &nbsp;</span><span class="c18">db</span><span class="c6">.</span><span class="c17">all</span><span class="c6 c7">(</span></p><p class="c5"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">&quot;SELECT * FROM employees WHERE City = $city&quot;</span><span class="c6 c7">, {</span></p><p class="c5"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">$city:</span><span class="c6">&nbsp;</span><span class="c2 c7">city</span></p><p class="c5"><span class="c6 c7">&nbsp; &nbsp; &nbsp; &nbsp;},</span></p><p class="c5"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp;(</span><span class="c2">error</span><span class="c6">, </span><span class="c2">rows</span><span class="c6">) </span><span class="c10">=&gt;</span><span class="c6 c7">&nbsp;{</span></p><p class="c5"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">console</span><span class="c6">.</span><span class="c17">log</span><span class="c6">(</span><span class="c2">rows</span><span class="c6 c7">);</span></p><p class="c5"><span class="c6 c7">&nbsp; &nbsp; &nbsp; &nbsp;}</span></p><p class="c5"><span class="c6 c7">&nbsp; &nbsp;);</span></p><p class="c5"><span class="c6 c7">};</span></p><p class="c5 c28"><span class="c6 c7"></span></p><p class="c5"><span class="c17">findEmployeeByCity</span><span class="c6">(</span><span class="c18">city1</span><span class="c6 c7">);</span></p><p class="c5"><span class="c17">findEmployeeByCity</span><span class="c6">(</span><span class="c18">city2</span><span class="c6 c7">);</span></p><p class="c22"><span class="c15 c7"></span></p><h3 class="c4" id="h.juvw90dnsrys"><span class="c7 c35">db.run</span></h3><ul class="c21 lst-kix_egyvvhcdver5-0 start"><li class="c11 li-bullet-0"><span>Used to execute SQL commands that don&rsquo;t return rows, i.e. </span><span class="c26">INSERT</span><span>&nbsp;and </span><span class="c7 c26 c36">CREATE TABLE</span></li><li class="c11 li-bullet-0"><span>Sometimes it attaches properties to </span><span class="c26">this</span><span>, i.e. </span><span class="c26">this.lastID</span><span class="c15 c7">&nbsp;for getting the id of the last row that&rsquo;s been inserted</span></li></ul><ul class="c21 lst-kix_egyvvhcdver5-1 start"><li class="c16 li-bullet-0"><span>Note that to access this, you need to use </span><span class="c26">function</span><span>&nbsp;to declare the callback. An arrow function will return </span><span class="c7 c26 c36">undefined</span></li></ul><ul class="c21 lst-kix_egyvvhcdver5-0"><li class="c11 li-bullet-0"><span class="c26">INSERT INTO</span><span class="c15 c7">&nbsp;example</span></li></ul><p class="c5"><span class="c24 c7">// Schema: { AlbumId: 88, Title: &#39;Faceless&#39;, ArtistId: 87 }</span></p><p class="c5"><span class="c18">db</span><span class="c6">.</span><span class="c17">run</span><span class="c6">(</span><span class="c9">&quot;INSERT INTO albums (Title, ArtistId) VALUES (&#39;Hello world&#39;, 54)&quot;</span><span class="c6">, </span><span class="c10">function</span><span class="c6">(</span><span class="c2">error</span><span class="c6 c7">) {</span></p><p class="c5"><span class="c6">&nbsp; &nbsp;</span><span class="c3">if</span><span class="c6">&nbsp;(</span><span class="c2">error</span><span class="c6 c7">) {</span></p><p class="c5"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">throw</span><span class="c6">&nbsp;</span><span class="c9">&quot;This is a custom error&quot;</span><span class="c6 c7">;</span></p><p class="c5"><span class="c6 c7">&nbsp; &nbsp;}</span></p><p class="c5 c28"><span class="c6 c7"></span></p><p class="c5"><span class="c6">&nbsp; &nbsp;</span><span class="c2">console</span><span class="c6">.</span><span class="c17">log</span><span class="c6">(</span><span class="c10">this</span><span class="c6">.</span><span class="c2">lastID</span><span class="c6 c7">);</span></p><p class="c5"><span class="c6">});</span></p><ul class="c21 lst-kix_lgy07ebbw5j5-0 start"><li class="c11 li-bullet-0"><span class="c26">CREATE TABLE</span><span class="c15 c7">&nbsp;example</span></li></ul><p class="c5"><span class="c18">db</span><span class="c6">.</span><span class="c17">run</span><span class="c6">(</span><span class="c9">&quot;DROP TABLE IF EXISTS Average&quot;</span><span class="c6">, </span><span class="c2">error</span><span class="c6">&nbsp;</span><span class="c10">=&gt;</span><span class="c6 c7">&nbsp;{</span></p><p class="c5"><span class="c6">&nbsp; &nbsp;</span><span class="c3">if</span><span class="c6">&nbsp;(</span><span class="c2">error</span><span class="c6">) {</span><span class="c3">throw</span><span class="c6">&nbsp;</span><span class="c2">error</span><span class="c6 c7">};</span></p><p class="c5"><span class="c6">&nbsp; &nbsp;</span><span class="c18">db</span><span class="c6">.</span><span class="c17">run</span><span class="c6">(</span><span class="c9">&quot;CREATE TABLE Average (id INTEGER PRIMARY KEY, year INTEGER NOT NULL, temperature REAL NOT NULL)&quot;</span><span class="c6">, </span><span class="c2">error</span><span class="c6">&nbsp;</span><span class="c10">=&gt;</span><span class="c6 c7">&nbsp;{</span></p><p class="c5"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">if</span><span class="c6">(</span><span class="c2">error</span><span class="c6">) {</span><span class="c3">throw</span><span class="c6">&nbsp;</span><span class="c2">error</span><span class="c6 c7">};</span></p><p class="c5"><span class="c6 c7">&nbsp; &nbsp;});</span></p><p class="c5"><span class="c6">});</span></p><p class="c22"><span class="c15 c7"></span></p><h3 class="c4" id="h.1cb7wdg3oet8"><span class="c35 c7">db.each</span></h3><ul class="c21 lst-kix_iq8ywxonbta1-0 start"><li class="c11 li-bullet-0"><span class="c15 c7">Runs the callback function on every row returned from a query</span></li><li class="c11 li-bullet-0"><span>It&rsquo;s like </span><span class="c26">forEach()</span><span class="c15 c7">&nbsp;for the database</span></li><li class="c11 li-bullet-0"><span class="c15 c7">It can also take in an optional second callback to run when all queries are completed</span></li><li class="c11 li-bullet-0"><span class="c15 c7">Useful for:</span></li></ul><ul class="c21 lst-kix_iq8ywxonbta1-1 start"><li class="c16 li-bullet-0"><span class="c15 c7">Updating rows</span></li><li class="c16 li-bullet-0"><span class="c15 c7">Memory management: only one row needs to be looked at at a time</span></li></ul><p class="c5"><span class="c18">db</span><span class="c6">.</span><span class="c17">each</span><span class="c6">(</span><span class="c9">&quot;SELECT * FROM albums WHERE Title LIKE &#39;%Djavan Ao Vivo%&#39;&quot;</span><span class="c6">, (</span><span class="c2">error</span><span class="c6">, </span><span class="c2">row</span><span class="c6">) </span><span class="c10">=&gt;</span><span class="c6 c7">&nbsp;{</span></p><p class="c5"><span class="c6">&nbsp; &nbsp;</span><span class="c2">console</span><span class="c6">.</span><span class="c17">log</span><span class="c6">(</span><span class="c9">`</span><span class="c10">${</span><span class="c2">row</span><span class="c6">.</span><span class="c2">ArtistId</span><span class="c10">}</span><span class="c9">&nbsp;is the Artist ID and </span><span class="c10">${</span><span class="c2">row</span><span class="c6">.</span><span class="c2">Title</span><span class="c10">}</span><span class="c9">&nbsp;is the Title`</span><span class="c6 c7">);</span></p><p class="c5"><span class="c6 c7">})</span></p><p class="c5 c28"><span class="c6 c7"></span></p><p class="c5"><span class="c24 c7">// Returns:</span></p><p class="c5"><span class="c24 c7">// 80 is the Artist ID and Djavan Ao Vivo - Vol. 02 is the Title</span></p><p class="c5"><span class="c24 c7">// 80 is the Artist ID and Djavan Ao Vivo - Vol. 1 is the Title</span></p><p class="c22"><span class="c15 c7"></span></p><h3 class="c4" id="h.trepus2ot1w"><span class="c35 c7">db.serialize</span></h3><ul class="c21 lst-kix_1cs4bla96jjc-0 start"><li class="c11 li-bullet-0"><span>By default, </span><span class="c26">db.run</span><span>&nbsp;commands all want to run at once. This is problematic, say, if you need to create the table before inserting into it. </span><span class="c26">db.serialize</span><span class="c15 c7">&nbsp;allows these events to run in order</span></li><li class="c11 li-bullet-0"><span class="c15 c7">It&rsquo;s also helpful to avoid nested callback hell</span></li></ul><p class="c5"><span class="c18">db</span><span class="c6">.</span><span class="c17">serialize</span><span class="c6">(() </span><span class="c10">=&gt;</span><span class="c6 c7">&nbsp;{</span></p><p class="c5"><span class="c6">&nbsp; &nbsp;</span><span class="c18">db</span><span class="c6">.</span><span class="c17">run</span><span class="c6">(</span><span class="c9">&quot;DROP TABLE Dog&quot;</span><span class="c6 c7">);</span></p><p class="c5"><span class="c6">&nbsp; &nbsp;</span><span class="c18">db</span><span class="c6">.</span><span class="c17">run</span><span class="c6">(</span><span class="c9">&quot;CREATE TABLE Dog&quot;</span><span class="c6 c7">);</span></p><p class="c5"><span class="c6">&nbsp; &nbsp;</span><span class="c18">db</span><span class="c6">.</span><span class="c17">run</span><span class="c6">(</span><span class="c9">&quot;INSERT INTO Dog (breed, name, owner, fur_color, fur_length) VALUES &nbsp;(&#39;Dachshund&#39;, &#39;Spike&#39;, &#39;Elizabeth&#39;, &#39;Brown&#39;, &#39;Short&#39;)&quot;</span><span class="c6 c7">);</span></p><p class="c5"><span class="c6">});</span></p><p class="c22"><span class="c15 c7"></span></p><p class="c22"><span class="c15 c7"></span></p><h1 class="c25" id="h.ofyftsmmpb0t"><span class="c7 c30">Example</span></h1><h2 class="c4" id="h.636w3svc809c"><span class="c7 c36 c37">Create a new table, fill it with data from another table</span></h2><p class="c13"><span class="c10">const</span><span class="c6">&nbsp;{ </span><span class="c18">calculateAverages</span><span class="c6">, </span><span class="c18">addClimateRowToObject</span><span class="c6">, </span><span class="c18">logNodeError</span><span class="c6">, </span><span class="c18">printQueryResults</span><span class="c6">&nbsp;} = </span><span class="c17">require</span><span class="c6">(</span><span class="c9">&#39;./utils&#39;</span><span class="c6 c7">);</span></p><p class="c13"><span class="c10">const</span><span class="c6">&nbsp;</span><span class="c18">sqlite</span><span class="c6">&nbsp;= </span><span class="c17">require</span><span class="c6">(</span><span class="c9">&#39;sqlite3&#39;</span><span class="c6 c7">);</span></p><p class="c13 c28"><span class="c6 c7"></span></p><p class="c13"><span class="c10">const</span><span class="c6">&nbsp;</span><span class="c18">db</span><span class="c6">&nbsp;= </span><span class="c10">new</span><span class="c6">&nbsp;</span><span class="c2">sqlite</span><span class="c6">.</span><span class="c26 c27">Database</span><span class="c6">(</span><span class="c9">&#39;./db.sqlite&#39;</span><span class="c6 c7">);</span></p><p class="c13 c28"><span class="c6 c7"></span></p><p class="c13"><span class="c10">const</span><span class="c6">&nbsp;</span><span class="c18">temperaturesByYear</span><span class="c6 c7">&nbsp;= {};</span></p><p class="c13 c28"><span class="c6 c7"></span></p><p class="c13"><span class="c24 c7">// start by wrapping all the code below in a serialize method</span></p><p class="c13"><span class="c18">db</span><span class="c6">.</span><span class="c17">serialize</span><span class="c6">(() </span><span class="c10">=&gt;</span><span class="c6 c7">&nbsp;{</span></p><p class="c13"><span class="c6">&nbsp; &nbsp;</span><span class="c18">db</span><span class="c6">.</span><span class="c17">run</span><span class="c6">(</span><span class="c9">&#39;DROP TABLE IF EXISTS Average&#39;</span><span class="c6">, </span><span class="c2">error</span><span class="c6">&nbsp;</span><span class="c10">=&gt;</span><span class="c6 c7">&nbsp;{</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">if</span><span class="c6">&nbsp;(</span><span class="c2">error</span><span class="c6 c7">) {</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">throw</span><span class="c6">&nbsp;</span><span class="c2">error</span><span class="c6 c7">;</span></p><p class="c13"><span class="c6 c7">&nbsp; &nbsp; &nbsp; &nbsp;}</span></p><p class="c13"><span class="c6 c7">&nbsp; &nbsp;});</span></p><p class="c13"><span class="c6">&nbsp; &nbsp;</span><span class="c18">db</span><span class="c6">.</span><span class="c17">run</span><span class="c6">(</span><span class="c9">&#39;CREATE TABLE Average (id INTEGER PRIMARY KEY, year INTEGER NOT NULL, temperature REAL NOT NULL)&#39;</span><span class="c6">, </span><span class="c2">logNodeError</span><span class="c6 c7">);</span></p><p class="c13"><span class="c6">&nbsp; &nbsp;</span><span class="c18">db</span><span class="c6">.</span><span class="c17">each</span><span class="c6">(</span><span class="c9">&#39;SELECT * FROM TemperatureData&#39;</span><span class="c6 c7">,</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp;(</span><span class="c2">error</span><span class="c6">, </span><span class="c2">row</span><span class="c6">) </span><span class="c10">=&gt;</span><span class="c6 c7">&nbsp;{</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">if</span><span class="c6">&nbsp;(</span><span class="c2">error</span><span class="c6 c7">) {</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">throw</span><span class="c6">&nbsp;</span><span class="c2">error</span><span class="c6 c7">;</span></p><p class="c13"><span class="c6 c7">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c17">addClimateRowToObject</span><span class="c6">(</span><span class="c2">row</span><span class="c6">, </span><span class="c18">temperaturesByYear</span><span class="c6 c7">);</span></p><p class="c13"><span class="c6 c7">&nbsp; &nbsp; &nbsp; &nbsp;},</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">error</span><span class="c6">&nbsp;</span><span class="c10">=&gt;</span><span class="c6 c7">&nbsp;{</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">if</span><span class="c6">&nbsp;(</span><span class="c2">error</span><span class="c6 c7">) {</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">throw</span><span class="c6">&nbsp;</span><span class="c2">error</span><span class="c6 c7">;</span></p><p class="c13"><span class="c6 c7">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10">const</span><span class="c6">&nbsp;</span><span class="c18">averageTemperatureByYear</span><span class="c6">&nbsp;= </span><span class="c17">calculateAverages</span><span class="c6">(</span><span class="c18">temperaturesByYear</span><span class="c6 c7">);</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c18">averageTemperatureByYear</span><span class="c6">.</span><span class="c17">forEach</span><span class="c6">(</span><span class="c2">row</span><span class="c6">&nbsp;</span><span class="c10">=&gt;</span><span class="c6 c7">&nbsp;{</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c18">db</span><span class="c6">.</span><span class="c17">run</span><span class="c6">(</span><span class="c9">&#39;INSERT INTO Average (year, temperature) VALUES ($year, $temp)&#39;</span><span class="c6 c7">, {</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">$year:</span><span class="c6">&nbsp;</span><span class="c2">row</span><span class="c6">.</span><span class="c2">year</span><span class="c6 c7">,</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">$temp:</span><span class="c6">&nbsp;</span><span class="c2">row</span><span class="c6">.</span><span class="c2 c7">temperature</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}, </span><span class="c2">err</span><span class="c6">&nbsp;</span><span class="c10">=&gt;</span><span class="c6 c7">&nbsp;{</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">if</span><span class="c6">&nbsp;(</span><span class="c2">err</span><span class="c6 c7">) {</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">console</span><span class="c6">.</span><span class="c17">log</span><span class="c6">(</span><span class="c2">err</span><span class="c6 c7">);</span></p><p class="c13"><span class="c6 c7">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></p><p class="c13"><span class="c6 c7">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});</span></p><p class="c13"><span class="c6 c7">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c18">db</span><span class="c6">.</span><span class="c17">all</span><span class="c6">(</span><span class="c9">&#39;SELECT * FROM Average&#39;</span><span class="c6 c7">,</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(</span><span class="c2">error</span><span class="c6">, </span><span class="c2">row</span><span class="c6">) </span><span class="c10">=&gt;</span><span class="c6 c7">&nbsp;{</span></p><p class="c13"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c17">printQueryResults</span><span class="c6">(</span><span class="c2">row</span><span class="c6 c7">)</span></p><p class="c13"><span class="c6 c7">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;})</span></p><p class="c13"><span class="c6 c7">&nbsp; &nbsp; &nbsp; &nbsp;});</span></p><p class="c13"><span class="c6">});</span></p><p class="c22"><span class="c15 c7"></span></p><p class="c22"><span class="c15 c7"></span></p></body></html>